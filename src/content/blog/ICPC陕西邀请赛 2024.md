---
title: 'ICPC 陕西邀请赛 2024'
description: ''
publishDate: 2024-05-24
tags:
  - ACM
  - 游记
  - 总结
  - 正赛
---



<!-- more -->

## 游记

### Preface

西安好热好热好热，瓜大除了考场都没空调，似了。

### Day -1

学校好有钱买的超经票，不知道为什么还能进尊鹏阁，狂炫小零食（

第一天住的地方附近有麦还有DQ，可惜当时懒得去，第二天到了瓜大后悔没大吃特吃

### Day 0

早上在酒店摸鱼写军高大作业，滚榜的时候也在写，在机场返程的时候也在写。论水课摸鱼摸大发最后两周才看大作业要求的后果，怎么会是呢。

下午就去瓜大的接驳点了，好远，好热，车来的好慢～

到了之后就是正常签到、拍照，头发万年没剪后来滚榜放照片的时候直接崩不住了，感觉回头要去弄一下了

晚饭在食堂吃的，结果餐券只有三个窗口能用，滑蛋饭味道感觉也一般。食堂也超级超级热，不知道是空调功率不够还是压根没开，就看到几个烧烤风扇在转，我看旁边有个人吃完脖子周围汗湿了一大圈（

不过瓜大那个飞机真大啊，泥航输麻了。

超市也大，有全口味合味道和拉王诶，全口味诶！

### Day 1

早上七点多才起床，吃完饭到考场都八点半了，狠狠鸽热身赛（

到场之后也没写题，看了下题面调调环境就开始摸鱼了，竟然有开箱即用的`VS CODE` 。第一次看英文题面挺累的，题目超过一面就完全没有看的欲望（bushi。不过还好没什么生僻词，不会看太久

然后狠狠吐槽一下瓜大：

1. 热身赛结束前十分钟就开始赶人清场了，但是清场一没发题二没发账密，差不多就是重启了下电脑，最后题面是开始后过了好几分钟才拿到的，不是很理解这个清场请了什么。据说去年就有这个问题了，emmm不好评价。

2. 赛时打印代码也好慢，提交打印上了个厕所回来还没送过来。甚至有一题打印完都调A了才送。

3. 滚榜部分极其无聊，速度特别慢，一楼人多还热，坐在中间跟坐牢一样。不过主持人至少能看出来在尽量找到滚榜的气氛，但是架不住报幕人太无聊了，就是毫无感情的读榜机器。不求跟相声一样至少别捧读吧。

**然后是赛时部分**：

一开始确定了签到是 J 和 M ， 结果 J 好像是精度问题连 WA 4次，M 我看错题连 WA 三次，成功达成 1h 2A 7罚时的铁牌开局

然后 xgg 上来秒了 F 博弈论的大致思路，但是后来造了好几个反例才完全修对，又痛吃4次WA。这个时候罚时已经遥遥领先了，于是后面就完全没顾虑了准备无脑交，结果剩下五题全是一遍过（

我 L 第一版过了样例后随手造个数据卡下来了，后来发现是因为 $ch - 'a' + 1$ 写成 $ch - '0' + 1$ ，手糊属性稳定发挥（

接着我去看 `I` ，想了个状压直接秒了。感觉 `I` 的时间给的还是挺宽的，想到两个优化都没写一个跑满 `1e9` 级别的状压就过了

然后看榜，剩下可能过的应该是 G 和 E ，G 的那个特殊性质不太会用，尝试写了个根号分治，结果毫无疑问 T 了，要是多给一秒应该是能卡过的（大概

upd：逛知乎发现有人卡过了，但是没开gym我也不知道要改哪，总不能是 vector 的锅吧

这个时候他俩在看 E ，发现挺好写的，然后超快写完一发过，这题最后才过了8个队过了，神奇

然后差不多还剩五分钟，直接下班

感谢 wk 和 xgg 带飞捏

晚上就不在瓜大那边住了，吃完饭和朋友去买了麦旋风，可惜没DQ

### Day 2

一觉睡到十点半导致错过物理实验选课，希望下周在济南别睡过（

去大雁塔和钟楼逛了一圈，然后就去机场了

这次没怎么玩还是怪可惜的，不过肉夹馍好吃，下次来一定要大吃特吃！（但是不是很想再来了，瓜大你有什么头猪吗

## 题解

没gym验证正确性就不放代码只简单写个思路捏


### D - Make Them Straight

因为 $a_i \leq 1e6$ ，且 $k > 0$ ，所以对于每个 $k$ ，在 $\lfloor \frac {1e6} {k} \rfloor + 1$ 项之后的一定是要修改的

所以我们只需要遍历前面的部分，这部分时间复杂度是 $O(\Sigma max(a_i) / k) = O(max(a_i))$

先随便假定一个 $a_1$，计算前面的每一项与理论值的差，开一个 `map` 统计一下不同差值的修改费用和，这个 $k$ 对答案的贡献就是修改所有项的费用减去这个最大费用和

`map` 有一个 $log$ ，所以最终复杂度是 $O(max(a_i)logn)$

### F - XOR Game

论 Alice 和 Bob 为什么天天玩游戏.jpg

首先我们可以确定的是，如果一个数的个数为偶数个，那么肯定不会先选这个数。因为无论此时谁先手，对方只要跟着他取，就能决定这一位最后的结果，所以一定是优先轮流取为个数奇数的数

这里有个坑点就是先取的是为 $1$ 的奇数，然后才是其他的奇数。这个很好找反例，比如
```
4 0
2 1 3 2
```
这里最优解应该是Alice 先取 $2 ^ 1$ 而不是个数为 $3$ 个的 $2 ^ 2$ ，最后的答案为 $0010$。结合这个例子应该还是很好理解的。

$z$ 如果是偶数就没有影响，如果是奇数那么也会在上面的过程中被取一次

然后等到所有的奇数都被取成偶数后看轮到谁，轮到 Alice 说明 Bob 决定剩下的每一位，反之则是 Alice，对剩下的位置直接赋值就好了

PS：答案从高位输出，与输入顺序相反

### I - Smart Quality Inspector

如果从 $k$ 到 $1$ 放数字，那么每次放下的数产生贡献的区间一定不包括已经覆盖的区间

那么直接跑状压就行了，没什么好说的

转移 $f_{i, S | 1 << (j - 1)} = min(f_{i + 1, S} + num \times i)$ ，其中 $num$ 为 $j$ 经过的没有被覆盖的区间

优化一：每层有效状态 $S$ 需要满足 $1$ 的个数为 $k - i + 1$ 个，可以预先处理出来

优化二：$num$ 可以通过一个五维循环初始化

最终复杂度为 $O(max(n ^ 5, n ^ 2 \times C^{max(n / 2, k)}_{n}))$ ，差不多是 $1e7$ 级别的 


### J - Triangle

签到题

这里讲一下 $O(n)$ 的做法

令这个线段为 $f(x)$

实际上就是对于每个 $x.5$ 的位置，对函数值四舍五入

那么如何规避浮点数的误差呢

$f(x.5) = a - \frac {a} {b} (x.5)$ ，可以变形为

$2b \times f(x.5) = 2ab - a(2x + 1)$ ，这个时候右边就是整数了

此时我们把每一格的高度变为了 $2b$ ，所以只需要除 $b$ 后对 $2$ 上取整就是每一位的贡献

### L - Rubbish Sorting

首先注意到垃圾名字长度只有 $5$ ，对每个名字按 $27$ 进制一一编号也只有 $1e7$ 的数量级，所以考虑把每个名字的 $2 ^ 5$ 种情况全部存进去

然后对每次查询，枚举查询名字的 $2 ^ 5$ 种情况对应的最小编号及其相似度，最后取相似度最高的那个

### M - Chained Lights

签到题

打表，然后发现只有 $k = 1$ 才亮，没什么好说的捏

---

写完啦，济南加油捏