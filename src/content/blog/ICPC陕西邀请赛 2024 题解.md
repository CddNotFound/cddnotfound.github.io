---
title: 'ICPC 陕西邀请赛 2024 题解 - DFIJLM'
description: ''
publishDate: 2024-05-24
tags:
  - ACM
  - 正赛
---
<!-- more -->

## D - Make Them Straight

因为 $a_i \leq 1e6$ ，且 $k > 0$ ，所以对于每个 $k$ ，在 $\lfloor \frac {1e6} {k} \rfloor + 1$ 项之后的一定是要修改的

所以我们只需要遍历前面的部分，这部分时间复杂度是 $O(\Sigma max(a_i) / k) = O(max(a_i))$

先随便假定一个 $a_1$，计算前面的每一项与理论值的差，开一个 `map` 统计一下不同差值的修改费用和，这个 $k$ 对答案的贡献就是修改所有项的费用减去这个最大费用和

`map` 有一个 $log$ ，所以最终复杂度是 $O(max(a_i)logn)$

## F - XOR Game

论 Alice 和 Bob 为什么天天玩游戏.jpg

首先我们可以确定的是，如果一个数的个数为偶数个，那么肯定不会先选这个数。因为无论此时谁先手，对方只要跟着他取，就能决定这一位最后的结果，所以一定是优先轮流取为个数奇数的数

这里有个坑点就是先取的是为 $1$ 的奇数，然后才是其他的奇数。这个很好找反例，比如
```
4 0
2 1 3 2
```
这里最优解应该是Alice 先取 $2 ^ 1$ 而不是个数为 $3$ 个的 $2 ^ 2$ ，最后的答案为 $0010$。结合这个例子应该还是很好理解的。

$z$ 如果是偶数就没有影响，如果是奇数那么也会在上面的过程中被取一次

然后等到所有的奇数都被取成偶数后看轮到谁，轮到 Alice 说明 Bob 决定剩下的每一位，反之则是 Alice，对剩下的位置直接赋值就好了

PS：答案从高位输出，与输入顺序相反

## I - Smart Quality Inspector

如果从 $k$ 到 $1$ 放数字，那么每次放下的数产生贡献的区间一定不包括已经覆盖的区间

那么直接跑状压就行了，没什么好说的

转移 $f_{i, S | 1 << (j - 1)} = min(f_{i + 1, S} + num \times i)$ ，其中 $num$ 为 $j$ 经过的没有被覆盖的区间

优化一：每层有效状态 $S$ 需要满足 $1$ 的个数为 $k - i + 1$ 个，可以预先处理出来

优化二：$num$ 可以通过一个五维循环初始化

最终复杂度为 $O(max(n ^ 5, n ^ 2 \times C^{max(n / 2, k)}_{n}))$ ，差不多是 $1e7$ 级别的 


## J - Triangle

签到题

这里讲一下 $O(n)$ 的做法

令这个线段为 $f(x)$

实际上就是对于每个 $x.5$ 的位置，对函数值四舍五入

那么如何规避浮点数的误差呢

$f(x.5) = a - \frac {a} {b} (x.5)$ ，可以变形为

$2b \times f(x.5) = 2ab - a(2x + 1)$ ，这个时候右边就是整数了

此时我们把每一格的高度变为了 $2b$ ，所以只需要除 $b$ 后对 $2$ 上取整就是每一位的贡献

## L - Rubbish Sorting

首先注意到垃圾名字长度只有 $5$ ，对每个名字按 $27$ 进制一一编号也只有 $1e7$ 的数量级，所以考虑把每个名字的 $2 ^ 5$ 种情况全部存进去

然后对每次查询，枚举查询名字的 $2 ^ 5$ 种情况对应的最小编号及其相似度，最后取相似度最高的那个

## M - Chained Lights

签到题

打表，然后发现只有 $k = 1$ 才亮，没什么好说的捏